(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[536],{5168:(e,t,a)=>{Promise.resolve().then(a.bind(a,7174))},5500:(e,t,a)=>{"use strict";var s=a(8188);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},7174:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(6638),r=a(599),n=a(5500),l=a(5400);let u=()=>{let{t:e}=(0,r.Bd)("common"),t=(0,n.useRouter)(),[a,u]=(0,s.useState)(null),[o,c]=(0,s.useState)(null),[i,d]=(0,s.useState)(!0),h=e=>"object"==typeof e&&null!==e&&"message"in e,p=async()=>{let e=localStorage.getItem("vpn_user_token");if(!e)return void t.push("/login");d(!0);try{let a=l.env.NEXT_PUBLIC_API_URL||"http://localhost:5000",s=await fetch("".concat(a,"/api/user/status"),{headers:{"x-access-token":e}});if(!s.ok){if(401===s.status){localStorage.removeItem("vpn_user_token"),t.push("/login");return}let e=await s.json();throw Error(e.message||"Failed to fetch user data")}let r=await s.json();u(r),c(null)}catch(e){c(h(e)?e.message:"An unexpected error occurred"),u(null)}finally{d(!1)}};(0,s.useEffect)(()=>{let e=()=>{let e=new URLSearchParams(window.location.search);"true"===e.get("payment_success")&&(alert("Payment successful! Your VIP plan is now active..."),t.replace("/dashboard")),"true"===e.get("payment_cancelled")&&(alert("Payment was cancelled. Your plan has not been changed."),t.replace("/dashboard"))};(async()=>{await p(),e()})()},[t])}}},e=>{var t=t=>e(e.s=t);e.O(0,[599,379,353,358],()=>t(5168)),_N_E=e.O()}]);